[toc]





> 说明：支付相关的面试题，支付业务相关的知识
>
> https://juejin.cn/post/7287036223541379126?searchId=2024051309460539C02330970316C07265



# 支付系统常见面试题：

1. 电商交易系统中关于支付 的流程？
1. 支付系统包含的模块？
2. 清算系统和风控系统的经验？
3. 针对业务问题的解决方案？

针对业务的问题：

``` md
1. 如何防止重复下单？https://blog.csdn.net/yuanhantin/article/details/131637616  a前端b订单号
2. 如何避免重复扣款？ 根据订单号判断
3. 如何解决客户的恶意下单问题  通过nginx，根据访问的频率和次数封ip 
4. 订单id是怎么生成的？怎么保证唯⼀性？ 雪花算法、uuid、订单号打标
5. 如果用户支付成功，但是看到订单的状态还是未支付，于是又去支付了⼀次，会重复支付吗？   已生成支付信息，订单号唯一 ， 不会重复支付 
用户下单这个时刻，正好赶上商品调价怎么处理？  在结算页加入验证逻辑，给出用户提醒 
6. 假如支付完了微信⼀直不回调怎么办？外在因素检查：系统问题、网络问题；重试，超时设置，查询      怎么防止超卖？  seata，redis-lua原子性检查库存保持原子性 ，预扣
7. 减库存成功了，但是⽣成订单失败了，该怎办？  保证事务，本地消息表、重试机制、异步处理（如何最终失败，补偿库存）、数据一致检查，限流降级
8. 购物车与Redis问题:购物车管理是怎么实现的？为什么⽤Redis不直接⽤MySQL？⽤Redis丢数据 了怎么办？如果项⽬中的Redis挂掉，如何减轻数据库的压力？
7.MQ问题（一些mq的八股文罢了，慢慢更新）为什么要使⽤消息队列？我主要调研了⼏个主流的MQ，Kafka、Rabbitmq、Rocketmq 选型我们主要基于以下⼏个点去考虑：如何保证消息队列的⾼可⽤？如何处理消息重复如何处理消息丢失的问题

7. 梳理电商支付逻辑及技术实现
8. 梳理pay支付系统架构
9. 微信支付流程？

```

1. 支付系统如何解决延迟、定时支付？
2. 支付系统资金账户系统如何设计？
3. 支付系统如何进行对账？
4. 支付系统对上不账如何处理？
5. 支付系统技术栈有什么？
6. 区块链相关的知识

# 支付系统职位要求

![image-20240511152251276](https://p.ipic.vip/aerrib.png)

![image-20240513085112786](/Users/haibingzhang/Library/Application Support/typora-user-images/image-20240513085112786.png)

# 一个支付系统由哪些模块组成：

![image-20240511135000844](https://p.ipic.vip/4kg5oc.png)

支付系统的核心模块及其主要功能如下：

1. 1.**应用管理（Application Management）**： 功能：管理支付系统中的应用程序，包括创建、配置、更新和删除应用程序。 目的：确保支付应用程序的安全性和合规性，同时提供必要的配置选项以满足不同商户的需求。

2. 2.**商户管理（Merchant Management）**： 功能：管理商户账户，包括商户的注册、审核、信息更新、权限设置等。 目的：确保商户信息的准确性和安全性，同时为商户提供必要的支付服务。

3. 3.**渠道管理（Channel Management）**： 功能：管理支付渠道，包括银行、支付网关、电子钱包等。 目的：确保支付渠道的多样性和可用性，为用户提供多种支付选项。

4. 4.**支付交易（Payment Transaction）**： 功能：处理支付请求，包括支付授权、交易执行、交易状态更新等。 目的：确保支付交易的安全、准确和高效执行。

5. 5.**支付对账（Payment Reconciliation）**： 功能：对支付交易进行对账，包括交易数据的核对、差异分析和解决。 目的：确保交易数据的准确性和完整性，及时发现和解决交易中的问题。 

6. 6.**清结算模块（Clearing and Settlement）**： 功能：处理支付交易的清算和结算，包括资金的转移、结算和账务处理。 目的：确保资金的准确转移和账务的正确处理，维护支付系统的财务健康。

这些模块共同构成了支付系统的基础架构，它们相互协作，确保支付流程的顺利进行，同时保护用户和商户的交易安全。在设计和实现支付系统时，需要考虑到这些模块的集成和协同工作，以提供一个高效、安全和用户友好的支付体验。

# 支付核心流程是什么样的？

支付系统有几个关键的核心流程：支付流程、对账流程、结算流程

![image-20240511135059336](https://p.ipic.vip/jfxhba.png)



**支付流程说明**

1. 用户在商城选购商品并发起支付请求；
2. 商城将支付订单通过 B2C 网关收款接口传送至支付网关；
3. 用户选择网银支付及银行，支付平台将订单转送至指定银行网关界面；
4. 用户支付完成，银行处理并向平台返回处理结果；
5. 支付平台接收处理结果，落地处理并向商户返回结果；
6. 商城接收到支付公司返回结果，落地处理（更改订单状态）并通知用户。

**退款流程说明**

1. 用户在商户平台发起退款申请，商户核实退款信息及申请；
2. 商户登录支付平台账户/或者通过支付公司提供的退款接口向支付平台发起退款；
3. 支付系统会对退款信息校验（退款订单对应的原订单是否支付成功？退款金额是否少于等于原订单金额？），校验商户账户余额是否充足等；校验不通过，则无法退款；
4. 支付系统在商户可用余额账户扣除金额，并将退款订单发送至银行，银行完成退款操作。注意：对于网关收款的订单退款，各银行要求不一，有些银行提供的退款接口要求原订单有效期在 90 或 180 天，有些银行不提供退款接口；针对超期或者不支持接口退款的订单，支付公司通过代付通道完成退款操作。

# 支付网关与清算系统在功能模块上的差异 

支付网关和清算系统是支付生态系统中的两个关键组件，它们各自承担着不同的职责，并在功能模块上有所差异。以下是支付网关和清算系统在功能模块上的主要差异：
### 支付网关（Payment Gateway）的功能模块：
1. **交易处理**： 接收和处理来自商户的支付请求。 将支付请求路由到相应的支付服务提供商（如银行、支付处理器）。
2. **安全性**： 提供数据加密和安全的交易处理。 实施欺诈检测和风险评估。
3. **支付方式支持**： 支持多种支付方式，如信用卡、电子钱包、银行转账等。 提供支付接口和集成服务。
4. **账户管理**： 允许商户创建和管理账户。 提供账户余额查询和资金管理功能。
5. **客户支持**： 提供帮助中心和客服支持。
6. **集成和API**： 提供API接口和SDK，以便商户集成支付网关到自己的网站或应用中。
7. **风险管理**： 实施信用评估和交易限额管理。
7. **多币种和多语言支持**： **货币转换**：支持多种货币的转换。 *多语言界面**：提供多语言的用户界面。
7. **系统支持层**： **监控和日志**：监控系统性能和交易流量，记录系统日志。 **备份和恢复**：确保数据的备份和系统的灾难恢复能力。

### 清算系统（Clearing System）的功能模块：
1. **清算处理**： 处理交易数据，计算交易双方的净额。 执行资金和证券的转移。
2. **结算处理**： 执行资金和证券的所有权转移。 确保交易双方的账户余额正确反映交易结果。
3. **对账和确认**： 与交易双方的银行或证券结算机构进行对账。 确保交易双方的账户余额正确无误。
4. **日终处理**： 在每个交易日结束时进行日终处理，包括轧差、未完成交易的处理等。
5. **报告和通知**： 向交易双方提供清算和结算报告。 向监管机构提供必要的交易和清算数据。
6. **审计和监控**： 进行内部审计，确保交易处理的合规性和准确性。 监控系统性能和交易流量，确保系统的稳定运行。

支付网关主要关注交易的接收、路由和初步处理，而清算系统则关注交易的最终处理，包括资金和证券的转移、对账、结算和日终处理。清算系统通常与支付网关紧密集成，以确保交易数据的准确性和完整性。清算系统还负责提供详细的交易报告和监控，以支持风险管理、合规性和审计需求。

# 对账流程是什么？

对账，我们一般称为勾兑，支付系统的对账，包含着两个层面：

1. 支付系统内部间的对账，支付系统一般是分布式的，整个支付系统被拆分成了多个子系统，如交易系统、账户系统、会计系统、每个子系统在处理各自的业务，系统间的对账，就是以上系统的核对，用于修正内部系统的数据不一致。
2. 支付系统与渠道的对账，这里的渠道泛指所有为支付系统提供代收付业务的渠道，如：第三方支付公司、银行、清算中心、网联、银联等。

## **支付系统与渠道间的对账**

系统间的对账比较好理解，这里主要讲支付系统与渠道间的对账。支付系统与渠道间的对账，又包含 2 个维度：

1. **信息流勾对**：即业务对账／交易对账，主要是就收单交易的支付信息与银行提供的信息流文件进行勾兑。信息流的勾地能发现支付系统与银行系统间的掉单、两边由于系统间的原因导致的同一笔交易支付金额不一致（可能性很小）或者支付状态不一致。信息流勾兑一般用来恢复掉单数据，可通过补单或者具体系统问题排查解决。
2. **资金流勾对**：即资金对账，主要就收单交易的支付信息与银行提供的资金流信息进行勾兑。资金流的勾兑能发现支付系统在银行的帐户资金实际发生的变动与应该发生的变动的差异，比如长款（银行多结算给支付系统）和短款（银行少结算给支付系统）。

说了这么多，就出现来 4 个对账文件，支付系统信息流文件、支付系统资金流文件、银行信息流文件、银行资金流文件。业务对账（勾兑）就是支付系统的信息流文件与银行的信息流文件勾兑，资金对账即支付系统的资金流文件与银行的资金流文件勾兑。

## **核对的差异处理**

1、信息流勾对的差异处理

- **支付系统信息流没有，而银行有的差异**，可能是因为支付系统交易数据的丢失、银行的掉单，如果是银行的掉单，由支付公司的运营登录银行网银确认后，做**补单处理**，并将差异表中该记录核销。
- **支付系统信息流有，而银行没有的差异，此种情况一般不会发生**，因为支付系统所有的交易数据都是取银行返回状态的数据。

2、资金流勾对对差异处理

- **支付系统资金流没有，而银行有的差异**。可能原因如下：1、银行日切晚与支付系统核心账务系统；2、支付系统账务核心系统与其他系统间的掉单。一旦出现，则会出现**长款（即银行不应该结算而实际结算）**的现象，对于因日切导致的差异，在**第二天的对账中系统会对平**，其他原因的，需要技术排查。
- 支付系统资金流有，而银行没有的差异，可能是因为银行日切**早于支付系统**的核心账务系统，一旦出现，会出现**短款（银行应结算而实际未结算）**的现象，银行日切导致段差异，会在下一天与银行的勾对中，将此笔差异勾对上，如果是非日切导致的原因，就需要找银行追款了。

总结就是，业务对账，即信息流对账，支付系统的交易流水与银行的交易流水间核对，保障支付交易完整入账。资金对账，即资金流对账，支付系统的入账流水与银行的结算流水间核对，保障银行入账流水与实际入账资金的匹配。



# 支付系统中的清算系统

在支付系统中，清算模块和结算模块是两个关键的组成部分，它们各自承担着不同的职责。以下是这两个模块的核心逻辑：

## 清算系统一般包含以下几个核心模块：

1. **清算模块**： 负责处理交易数据，根据预设的清算规则生成清算凭证。 请求计费模块计算手续费、返佣、分润等费用。 生成清算流水，并请求账务系统进行记账。

2. **结算模块**： 获取清算流水，生成结算凭证。 根据结算规则为结算对象（如商户）生成预结算单，并请求账务系统记账。 处理预结算单上的调账单（如欠款或补款情况），生成调账凭证。

3. **计费模块**： 计算交易相关的费用，如手续费、返佣、分润等。

4. **清算配置模块**： 提供清算规则的配置功能，允许管理员设置和修改清算参数。

5. **结算配置模块**： 提供结算规则的配置功能，允许管理员设置和修改结算参数。

这些模块共同构成了一个完整的清算系统，它们相互协作，确保交易数据的准确处理和资金的合法流动。在实际的系统设计中，可能还会根据业务需求和监管要求，增加其他辅助模块，如账户管理、交易处理、报表生成等[➊](https://zhuanlan.zhihu.com/p/391053804)[❷](https://developer.baidu.com/article/details/3092320)[❸](https://www.zhihu.com/tardis/sogou/art/391053804)。

## 清算模块（Clearing Module）的核心逻辑：

1. **数据收集**： 收集支付系统中所有交易的数据，包括交易金额、交易时间、交易双方的账户信息等。

2. **交易匹配**： 将交易数据按照一定的规则进行匹配，确保每笔交易的双方信息正确无误。

3. **计算清算金额**： 根据交易数据和清算规则计算每笔交易的清算金额，这可能包括手续费、汇率转换等。

4. **生成清算凭证**： 为每笔交易生成清算凭证，这些凭证将用于后续的账务处理。

5. **清算执行**： 执行清算操作，将清算金额从一个账户转移到另一个账户，或者在内部账户之间进行划转。

6. **对账与调整**： 与交易参与方进行对账，确保清算金额的正确性，并对任何差异进行调整。

7. **报告与通知**： 生成清算报告，向相关方提供清算结果，并在必要时发送通知。

# 结算流程

![image-20240511135628898](https://p.ipic.vip/lawdvb.png)



# 资金账户操作

资金账户系统业务流程通常包括以下几个关键步骤：

1. **账户开立**： **内部账户开户**：资金中心直接开户或项目部申请开户，操作包括增加、保存、提交审批等步骤。资金中心管理岗负责账户的开立和复核[➊](https://edu.iask.sina.com.cn/jy/9KHhVPhwp6a.html)。 **银行账户开户**：同样分为资金中心直接开户和项目部申请开户，需要进行账户资料登记和复核[➊](https://edu.iask.sina.com.cn/jy/9KHhVPhwp6a.html)。

2. **账户管理**： **账户注销**：资金中心直接注销或项目部申请注销，包括账户注销申请和账户注销处理[➊](https://edu.iask.sina.com.cn/jy/9KHhVPhwp6a.html)。 **账户延期**：资金中心延期或项目部申请延期，涉及账户资料登记和延期处理[➊](https://edu.iask.sina.com.cn/jy/9KHhVPhwp6a.html)。

3. **资金结算**： **资金下拨**：资金中心直接下拨或项目部申请下拨，包括下拨制单和凭证复核等步骤[❹](https://m.book118.com/html/2015/0727/22118469.shtm)。

4. **资金收支**： **收款和付款**：涉及收款登记/付款录入、收款审核/付款处理等步骤。 **资金日报**：商业集团资金日报的编制和上报，确保资金流动的实时监控。

5. **预算编制**： **全年资金预算**：包括录入、计算、保存、检查、审核、提交审批等步骤[❸](https://m.book118.com/html/2023/1203/8006026135006012.shtm)。

6. **其他操作**： **资金下拨申请**：涉及审批流程，如门店资金管理员、上级单位资金管理员、银行处理等[❸](https://m.book118.com/html/2023/1203/8006026135006012.shtm)。

在整个资金账户系统业务流程中，安全性、准确性和效率是关键考虑因素。系统需要确保交易数据的完整性和保密性，同时也要保证交易处理的快速响应。此外，系统还需要提供足够的审计跟踪功能，以便在出现问题时能够追溯和解决。在实际操作中，每个步骤都需要遵循相应的内部控制和审批流程，以确保资金的安全和合规性[➊](https://edu.iask.sina.com.cn/jy/9KHhVPhwp6a.html)[❸](https://m.book118.com/html/2023/1203/8006026135006012.shtm)[❹](https://m.book118.com/html/2015/0727/22118469.shtm)。

# 调度系统及原理

> TBschedule实战    https://juejin.cn/post/7068569266676563981
>
> official website   https://github.com/nmyphp/tbschedule?tab=readme-ov-file
>
> Bilibili 李哈zzz

##  调度框架的技术选型？

![image-20240517114652754](/Users/haibingzhang/Library/Application Support/typora-user-images/image-20240517114652754.png)

在粗略的介绍了各个主流的分布式任务调度框架后，一个问题出现了：是哪些主要因素推动了框架一步步发展演进？笔者简要概括为如下4个因素：

- 业务复杂性：原先的业务复杂性低，2、3行代码就可以搞定；随着业务复杂性提高，任务的组织形态和执行内容都发生了很大变化，逐步衍生出**任务编排、框架生态融合、多语言及多终端支持**等诉求。
- 场景多样性：不再仅仅是简单的定时任务执行，类似批量计算、业务解耦等场景的问题，也逐步开始使用分布式任务调度框架解决。对框架能力的要求在于，**更丰富的任务执行策略、动态分片计算的支持、丰富的任务治理能力等**方面上。
- 分布式架构：分布式架构趋势的全面到来，是最重要的推进因素。框架的整体设计须以分布式架构为前提，在**任务节点及调度中心间的通讯、调度平台的高可用、任务节点的故障处理及恢复、任务调度可视化运维等**方面，都是全新的挑战。
- 海量数据并发：当海量的业务数据及并发调用成为常态，就使得分布式任务调度平台需要在**执行器性能、执行时间精准度、任务的并行及异步处理、节点资源弹性管控**等方面推进优化，以帮助提升平台整体的吞吐量。

##  调度系统的问题有什么？如何解决？



##   



## 调度框架:

- 传统的调度框架spring task、quartz也是可以进行集群调度作业的，一个节点挂了可以将任务漂移给其他节点执行从而避免单点故障，但是不支持分布式作业，一旦达到单机处理极限也会存在问题。
- elastic-job支持分布式，是一个很好的调度框架，但是开源时间较短，还没有经历大范围市场考验。

![image-20240516161835848](https://p.ipic.vip/j504p0.png)



# seata分布式事务的使用及原理

Seata（Simple Extensible Autonomous Transaction Architecture）是一个开源的分布式事务解决方案，它提供了一种简单有效的方式来解决分布式事务问题。Seata的分布式事务原理主要基于以下几个核心组件和概念：

1. 1.**事务协调器（TC, Transaction Coordinator）**： TC是Seata的核心组件，它独立部署并运行，负责维护全局事务的运行状态。 TC接收事务管理器（TM）的指令来发起全局事务的提交或回滚。 TC与资源管理器（RM）通信，协调各分支事务的提交或回滚。

2. 2.**事务管理器（TM, Transaction Manager）**： TM是嵌入在应用程序中的组件，负责开启一个全局事务，并最终向TC发起全局提交或回滚的指令。 TM通常与业务逻辑紧密集成，控制全局事务的范围。

3. 3.**资源管理器（RM, Resource Manager）**： RM是分布式事务的参与者，如数据库、消息队列等。 RM需要实现Seata提供的接口，并注册到TC中。 RM负责管理本地事务的提交和回滚，并向TC汇报本地事务的状态。

4. 4.**全局事务（Global Transaction）**： 全局事务由TC统一管理，它将多个本地事务组成一个全局事务，确保分布式事务的一致性。 全局事务的唯一标识是XID（全局事务ID），它在分布式系统中全局唯一，并在微服务调用链路中传播。

5. 5.**分支事务（Branch Transaction）**： 分支事务由TM统一管理，它将多个本地事务组成一个分支事务，确保分支事务的一致性。 分支事务在全局事务的上下文中执行，并向TC注册。

6. 6.**事务日志（Transaction Log）**： 事务日志用于记录分布式事务的执行过程，包括分支事务的提交和回滚操作。 当分布式事务出现异常时，可以通过事务日志来进行回滚操作，保证分布式事务的一致性。

Seata的分布式事务处理流程通常分为两个阶段：

- **第一阶段（Prepare Phase）**：
  - TM向TC申请开启一个全局事务，并生成一个全局唯一的XID。
  - RM向TC注册分支事务，并执行本地事务的准备工作（如数据库的本地事务操作）。
  - RM将本地事务的执行结果（如是否成功）报告给TC。
- **第二阶段（Commit/Rollback Phase）**：
  - 根据第一阶段的准备情况，TC决定是提交还是回滚全局事务。
  - 如果所有分支事务都成功，则TC向所有RM发送提交指令。
  - 如果任一分支事务失败，则TC向所有RM发送回滚指令。
  - RM根据TC的指令执行本地事务的提交或回滚操作。

Seata通过这些组件和流程的协作，实现了分布式事务的一致性，提高了系统的可靠性和稳定性[❷](https://blog.csdn.net/weixin_44062339/article/details/99710236)[❸](https://blog.csdn.net/qq_31960623/article/details/124681112)。































# 微软一面：订单超时未支付，如何自动关闭？             

| 方案                 | 优点                                                         | 缺点                                                         | 适用场景             |
| -------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | -------------------- |
| 方案一：使用定时任务 | 1. 简单易实现，易实现spring task, quartz,tbschedule          | 1. 对服务器内存消耗较大。2.存在延迟，取决于设置的时间间隔。3.假如订单量大，对数据压力比较大 | 1. 小型 系统，单量小 |
| 方案二：被动关单     | 1. 对系统压力小， 用户拉取订单时进行判断                     | 1. 超时未关单                                                | 1. 小型系统          |
| 方案三：使用延时消息 | 1. 实现简单，把未支付的订单发送到MQ进行处理 2. jdk 延时队列，delay queue | 1.需要维护三方中间件                                         | 大型系统             |
| 方案四：超时中心     | 1. 交给超时中心，注册超时事件。2. 统一进行超时后处理。例如：返还优惠券，释放库存。 | 1. 成本高                                                    |                      |



# 扩展知识

## 清算中心与结算中间有什么不同

清算中心与结算中心在金融领域中是两个不同的概念，它们在定义、作用、涉及内容及范围上都有所区别：

1. 1.**定义不同**： **清算中心**：清算中心通常是指一个专门的机构或系统，负责处理和完成金融交易中的资金清算工作。它涉及到不同银行或金融机构之间的资金划转，确保交易的最终结算。清算中心可以是中央银行下属的清算系统，也可以是独立的第三方清算机构。 **结算中心**：结算中心则更多地指代一个组织或部门，负责管理日常的交易结算活动。它涉及到对交易结果的计算，包括款项的支付、接收和对账等。

2. 2.**作用不同**： **清算中心**：主要负责确保金融交易的最终完成，包括资金的划转和清算，以及确保交易双方的资金安全。 **结算中心**：主要负责日常交易的结算工作，包括记录交易、计算应收应付款项、处理支付指令等。

3. 3.**涉及内容不同**： **清算中心**：不涉及债务转移，它更多关注的是资金的划转和清算过程。 **结算中心**：涉及债权债务关系的转移，它处理的是交易完成后债权债务的最终结果。

4. 4.**涉及范围不同**： **清算中心**：可以看作是结算中心的推广，清算中心的活动范围更广，包括了清分和结算两个步骤。清分是指对交易进行分类和汇总，而结算则是根据清分的结果进行资金的划转。 **结算中心**：则更多关注于结算过程本身，如对交易结果的计算和资金的转移。

在实际应用中，清算中心和结算中心的职责和操作流程可能会有所不同，具体取决于所在国家或地区的金融监管框架和金融机构的内部规定。例如，在中国，中国人民银行清算中心担任了重要的角色，它通过提供清算服务，连接各家银行的结算业务，确保资金的高效、安全流动[❺](https://iask.sina.com.cn/b/iRLSUyxnrGjr.html)。

总结来说，清算中心和结算中心在金融交易中都扮演着重要的角色，但它们的职责和操作流程有所不同。清算中心更多关注于资金的划转和清算过程，而结算中心则更多关注于交易结果的计算和资金的转移。

## 轧差（Netting）

是一种金融操作，它涉及将多个交易或债务合并为一个单一的净额结算。轧差的目的是减少交易对手之间的资金流动，从而降低交易成本和风险。轧差可以应用于多种金融交易，包括支付、清算、结算等。

轧差的基本步骤通常包括：
    1.    收集交易：
        收集所有相关的交易数据，这些交易可能是同一天发生的，也可能是连续几天的交易。
        2.    计算净额：
        对收集到的交易进行计算，确定每个交易对手的净交易额。这通常涉及将所有正交易（即买方交易）和负交易（即卖方交易）相加，然后从总和中减去任何重复的交易。
            3.    执行轧差：
        根据计算出的净额进行资金的转移。这意味着每个交易对手只需要支付或接收一个净额，而不是多个单独的交易金额。
                4.    确认和报告：
        向交易对手确认轧差结果，并提供轧差报告，说明每个交易对手的净额和支付或接收的金额。

轧差的优点包括：

    成本节约：通过减少交易对手之间的资金流动，轧差可以显著降低交易成本。
    风险降低：轧差减少了交易对手之间的交易次数，从而降低了信用风险和操作风险。
    效率提高：轧差简化了交易对手之间的结算过程，提高了整个金融系统的效率。

轧差可以是双边的，即两个交易对手之间的轧差，也可以是多边的，涉及多个交易对手。在多边轧差中，可能会使用中央对手方（CCP）来管理轧差过程，以进一步降低风险。
在实际应用中，轧差通常由清算所或清算系统自动执行，以确保交易的准确性和效率。轧差是金融市场基础设施（FMI）中的一个重要组成部分，对于提高金融市场的效率和稳定性至关重要。

## Spu vs sku

SPU（Standard Product Unit）是标准化产品单元的缩写，它是一组可复用、易检索的标准化信息的集合，用于描述一个产品的特性。通俗地说，如果两个商品的属性值和特性完全相同，那么它们就可以归为同一个SPU。

以下是SPU的一些关键特点：

- **标准化信息集合**：SPU包含了一组标准化的信息，这些信息能够准确地描述一个产品的特性。
- **商品信息聚合**：SPU是商品信息聚合的最小单位，它将具有相同特性的商品归为一类。
- **易于检索**：由于SPU包含标准化的信息，因此它便于在数据库或电子化系统中检索和管理。
- **特性描述**：SPU描述了一个产品的特性，这些特性通常包括产品的规格、型号、品牌、尺寸、颜色等。

SKU（Stock Keeping Unit）是库存单位的缩写，它是一个用于跟踪库存的系统化方法。在零售和电子商务中，SKU用于区分不同的商品变体，如不同的尺寸、颜色、款式等。每个SKU代表一个独特的商品变体，它具有唯一的库存和销售记录。

以下是SKU的一些关键特点：

- **唯一性**：每个SKU都是唯一的，它代表一个特定的商品变体。
- **详细描述**：SKU通常包含商品的详细信息，如尺寸、颜色、材质、品牌等。
- **库存管理**：SKU用于跟踪库存水平，包括库存数量、入库、出库和库存状态。
- **销售跟踪**：SKU用于记录销售数据，包括销售数量、销售额和销售时间。
- **价格管理**：SKU可以与特定的价格相关联，用于定价和促销活动。

## 支付名词：

https://blog.51cto.com/u_16485618/9126318

# 区块链+跨境支付的应用及案例分析

https://blog.csdn.net/tiandiwuya/article/details/81626326/?ops_request_misc=&request_id=&biz_id=102&utm_term=%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F%E6%A1%88%E4%BE%8B&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-6-81626326.142^v100^pc_search_result_base3&spm=1018.2226.3001.4187

## 史上最详细的RocketMq 下单支付案例 分享

https://blog.csdn.net/agonie201218/article/details/120244500?ops_request_misc=&request_id=&biz_id=102&utm_term=%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F%E6%A1%88%E4%BE%8B&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-120244500.142^v100^pc_search_result_base3&spm=1018.2226.3001.4187

#              可用性高达99.999%！支付系统高可用架构设计实战          

https://mp.weixin.qq.com/s?__biz=MzU2NjIzNDk5NQ%3D%3D&chksm=fcaed79bcbd95e8d462e98ef481055dfc8e2e571ac27c2b1a414505dd5d3e079afcc51f603f5&idx=1&mid=2247486855&scene=27&sn=c499fe12bda10a8012e847fd26536295&utm_campaign=geek_search&utm_content=geek_search&utm_medium=geek_search&utm_source=geek_search&utm_term=geek_search#wechat_redirect



# 参照：

山哥谈支付系统
https://www.infoq.cn/article/vNGZ8qxCqeXlrjMQ3cCv?utm_campaign=geek_search&utm_content=geek_search&utm_medium=geek_search&utm_source=geek_search&utm_term=geek_search
1 分 36 秒，100 亿，支付宝技术双 11 答卷：没有不可能（上）
https://www.infoq.cn/article/Y5mzzRGL8u5gMqFfejAF?utm_campaign=geektime_search&utm_content=geektime_search&utm_medium=geektime_search&utm_source=geektime_search&utm_term=geektime_search
支付系统高可用架构设计实战
https://www.infoq.cn/article/WJ2C3OYzXN619v8ObAAD?utm_campaign=geektime_search&utm_content=geektime_search&utm_medium=geektime_search&utm_source=geektime_search&utm_term=geektime_search





